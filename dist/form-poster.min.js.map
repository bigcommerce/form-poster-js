{"version":3,"file":"form-poster.min.js","mappings":"CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIH,GACe,iBAAZC,QACdA,QAAoB,WAAID,IAExBD,EAAiB,WAAIC,GACtB,CATD,CASGK,MAAM,I,yFCTT,aACA,SAGA,mBAAyCC,GACrC,IAAMC,EAAc,IAAI,UAGxB,OAFmB,IAAI,UAAWA,EAAaD,EAGnD,C,+DCTA,8BA6BA,QA5BI,YAAAE,MAAA,SAAMC,EAAaC,EAA8BC,GAAjD,WACUC,EAAOC,SAASC,cAAc,QAepC,OAbAF,EAAKG,MAAMC,QAAU,OAErBJ,EAAKK,aAAa,SAAUR,GAC5BG,EAAKK,aAAa,SAAU,QAC5BL,EAAKK,aAAa,SAAUN,GAAU,QAEtCO,OAAOC,KAAKT,GACPU,SAAQ,SAAAC,GACL,IAAMC,EAAQZ,EAAKW,GAEnBT,EAAKW,YAAY,EAAKC,aAAaF,EAAOD,GAC9C,IAEGT,CACX,EAEQ,YAAAY,aAAR,SAAqBF,EAAYD,GAC7B,IAAMI,EAAQZ,SAASC,cAAc,SAMrC,OAJAW,EAAMR,aAAa,OAAQI,GAC3BI,EAAMR,aAAa,OAAQ,UAC3BQ,EAAMR,aAAa,QAASK,GAErBG,CACX,EACJ,EA7BA,G,4ECEA,aAEA,aAII,WACYC,EACAC,GADA,KAAAD,aAAAA,EACA,KAAAC,SAAAA,CACT,CAyBP,OAvBI,YAAAC,SAAA,SAASnB,EAAaC,EAA8BmB,EAAuBlB,GACvE,IAAMC,EAAOkB,KAAKJ,aAAalB,MAAMsB,KAAKC,aAAatB,GAAMC,EAAMC,GAEnEqB,OAAOC,iBAAiB,UAAU,SAASC,IACvCF,OAAOG,oBAAoB,SAAUD,GAEjCL,GACAA,GAER,IAGAhB,SAASuB,KAAKb,YAAYX,GAC1BA,EAAKyB,QACT,EAEQ,YAAAN,aAAR,SAAqBtB,GACjB,OAAKqB,KAAKH,UAAaG,KAAKH,SAASW,QAAQ,IAAAC,eAAc9B,IAIpD,IAAA+B,WAAUV,KAAKH,SAASW,KAAM7B,GAH1BA,CAIf,EACJ,EAhCA,G,6GCJA,yBAA8BA,GAC1B,MAAO,eAAegC,KAAKhC,EAC/B,EAEA,qBAA0BiC,EAAeC,GACrC,MAAO,WAGkBC,EAHKF,EAIvBE,EAAKC,QAAQ,MAAO,KAJS,YAOxC,SAA4BD,GACxB,OAAOA,EAAKC,QAAQ,MAAO,GAC/B,CAT4CC,CAAmBH,IAG/D,IAA6BC,CAF7B,C,GCLIG,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAajD,QAGrB,IAAIC,EAAS6C,EAAyBE,GAAY,CAGjDhD,QAAS,CAAC,GAOX,OAHAmD,EAAoBH,GAAU/C,EAAQA,EAAOD,QAAS+C,GAG/C9C,EAAOD,OACf,C,qHCtBA,aAAS,kFAAAoD,OAAO,IAChB,aAAS,4EAAAA,OAAO,G","sources":["webpack://FormPoster/webpack/universalModuleDefinition","webpack://FormPoster/./src/create-form-poster.ts","webpack://FormPoster/./src/form-builder.ts","webpack://FormPoster/./src/form-poster.ts","webpack://FormPoster/./src/url-utils.ts","webpack://FormPoster/webpack/bootstrap","webpack://FormPoster/./src/index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"FormPoster\"] = factory();\n\telse\n\t\troot[\"FormPoster\"] = factory();\n})(self, () => {\nreturn ","import FormBuilder from './form-builder';\nimport FormPoster from './form-poster';\nimport FormPosterOptions from './form-poster-options';\n\nexport default function createFormPoster(options?: FormPosterOptions): FormPoster {\n    const formBuilder = new FormBuilder();\n    const formPoster = new FormPoster(formBuilder, options);\n\n    return formPoster;\n}\n","export default class FormBuilder {\n    build(url: string, data: { [key: string]: any }, target?: string): HTMLFormElement {\n        const form = document.createElement('form');\n\n        form.style.display = 'none';\n\n        form.setAttribute('action', url);\n        form.setAttribute('method', 'POST');\n        form.setAttribute('target', target || '_top');\n\n        Object.keys(data)\n            .forEach(key => {\n                const value = data[key];\n\n                form.appendChild(this._createInput(value, key));\n            });\n\n        return form;\n    }\n\n    private _createInput(value: any, key: string): HTMLInputElement {\n        const input = document.createElement('input');\n\n        input.setAttribute('name', key);\n        input.setAttribute('type', 'hidden');\n        input.setAttribute('value', value);\n\n        return input;\n    }\n}\n","import FormBuilder from './form-builder';\nimport FormPosterOptions from './form-poster-options';\nimport { isAbsoluteUrl, joinPaths } from './url-utils';\n\nexport default class FormPoster {\n    /**\n     * @internal\n     */\n    constructor(\n        private _formBuilder: FormBuilder,\n        private _options?: FormPosterOptions\n    ) {}\n\n    postForm(url: string, data: { [key: string]: any }, callback?: () => void, target?: string): void {\n        const form = this._formBuilder.build(this._prependHost(url), data, target);\n\n        window.addEventListener('unload', function handleUnload() {\n            window.removeEventListener('unload', handleUnload);\n\n            if (callback) {\n                callback();\n            }\n        });\n\n        // In order to submit the form, the form must be attached to DOM.\n        document.body.appendChild(form);\n        form.submit();\n    }\n\n    private _prependHost(url: string): string {\n        if (!this._options || !this._options.host || isAbsoluteUrl(url)) {\n            return url;\n        }\n\n        return joinPaths(this._options.host, url);\n    }\n}\n","export function isAbsoluteUrl(url: string): boolean {\n    return /^https?:\\/\\//.test(url);\n}\n\nexport function joinPaths(pathA: string, pathB: string): string {\n    return `${removeTrailingSlash(pathA)}/${removeLeadingSlash(pathB)}`;\n}\n\nfunction removeTrailingSlash(path: string): string {\n    return path.replace(/\\/$/, '');\n}\n\nfunction removeLeadingSlash(path: string): string {\n    return path.replace(/^\\//, '');\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","export { default as createFormPoster } from './create-form-poster';\nexport { default as FormPoster } from './form-poster';\n"],"names":["root","factory","exports","module","define","amd","self","options","formBuilder","build","url","data","target","form","document","createElement","style","display","setAttribute","Object","keys","forEach","key","value","appendChild","_createInput","input","_formBuilder","_options","postForm","callback","this","_prependHost","window","addEventListener","handleUnload","removeEventListener","body","submit","host","isAbsoluteUrl","joinPaths","test","pathA","pathB","path","replace","removeLeadingSlash","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","default"],"sourceRoot":""}